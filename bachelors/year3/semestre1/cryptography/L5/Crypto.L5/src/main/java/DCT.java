import java.awt.*;

/**
 * Created by Witalia on 29.11.14.
 */
public class DCT {
    private static final double[][] cos_t =
            {{1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0},
            {0.9807853, 0.8314696, 0.5555702, 0.1950903,  -0.1950903,-0.5555702,-0.8314696,-0.9807853},
            {0.9238795, 0.3826834,-0.3826834,-0.9238795,  -0.9238795,-0.3826834, 0.3826834, 0.9238795},
            {0.8314696,-0.1950903,-0.9807853,-0.5555702,   0.5555702, 0.9807853, 0.1950903,-0.8314696},
            {0.7071068,-0.7071068,-0.7071068, 0.7071068,   0.7071068,-0.7071068,-0.7071068, 0.7071068},
            {0.5555702,-0.9807853, 0.1950903, 0.8314696,  -0.8314696,-0.1950903, 0.9807853,-0.5555702},
            {0.3826834,-0.9238795, 0.9238795,-0.3826834,  -0.3826834, 0.9238795,-0.9238795, 0.3826834},
            {0.1950903,-0.5555702, 0.8314696,-0.9807853,   0.9807853,-0.8314696, 0.5555702,-0.1950903}};
    private static final double[][] e =
            {{0.125, 0.176777777, 0.176777777, 0.176777777,   0.176777777, 0.176777777, 0.176777777, 0.176777777},
            {0.176777777, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25},
            {0.176777777, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25},
            {0.176777777, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25},
            {0.176777777, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25},
            {0.176777777, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25},
            {0.176777777, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25},
            {0.176777777, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25}};

    public static double[][] DCT(Color[][] arr) {
        double[][] dct = new double[8][8];
        for (int i = 0; i < 8; ++i) {
            for (int j = 0; j < 8; ++j) {
                double temp = 0;
                for (int x = 0; x < 8; ++x) {
                    for (int y = 0; y < 8; ++y) {
                        temp += cos_t[i][x] * cos_t[j][y] * arr[x][y].getBlue();
                    }
                }
                dct[i][j] = e[i][j] * temp;
            }
        }
        return dct;
    }

    public static Color[][] inverseDCT(double[][] dct, Color[][] arr) {
        for (int i = 0; i < 8; ++i) {
            for (int j = 0; j < 8; ++j) {
                double temp = 0;
                for (int x = 0; x < 8; ++x) {
                    for (int y = 0; y < 8; ++y) {
                        temp += dct[x][y] * cos_t[x][i] * cos_t[y][j] * e[x][y];
                    }
                }
                arr[i][j] = new Color(
                        arr[i][j].getRed(),
                        arr[i][j].getGreen(),
                        (int) Math.max(0, Math.min(
                                255, Math.round(temp)
                        ))
                );
            }
        }
        return arr;
    }
}
